# 'branch merge' gracefully handles a single-branch stack
# where the branch is already merged.

as 'Test <test@example.com>'
at '2024-04-05T16:40:32Z'

# setup
cd repo
git init
git commit --allow-empty -m 'Initial commit'

# set up a fake GitHub remote
shamhub init
shamhub new origin alice/example.git
shamhub register alice
git push origin main

env SHAMHUB_USERNAME=alice
gs auth login

# create a single branch on trunk
git add feature1.txt
gs bc feature1 -m 'Add feature 1'

# submit and merge externally
gs bs --fill
stderr 'Created #1'
shamhub merge alice/example 1

# branch merge should find nothing to do
gs branch merge --no-branch-check
stderr 'already merged, skipping'
stderr 'No open changes to merge'

-- repo/feature1.txt --
This is feature 1
